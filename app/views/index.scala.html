@(keynote: models.Submission)

@scripts = {
@defining(java.util.UUID.randomUUID.toString) { uuid =>	
  <script>
    $(document).ready(function() {
      var websocket = new WebSocket("@routes.Application.messageBoard(uuid).webSocketURL(request)");
      websocket.onmessage = function(evt) {      	 
        var json = JSON.parse(evt.data);
        if(json.messageType == "proposalSubmission") {
        	  showProposal(json);        	
        	}
        	if(json.messageType == "registeredUser") {
          showRegisteredUser(json);        
        }
      };
      websocket.onerror = function(evt) {
        alert("error " + evt); 
      };
    });
    
    function showRegisteredUser(json) {
    	  var article = $("#buzz").find("article:first").remove();
    	  $(article).find("#registeredUserPictureUrl").attr('src', json.pictureUrl);
    	  $(article).find("#registerdUserName").html(json.name);
    	  $(article).find("#registerdUserTwitterId").html(json.twitterId);
    	  $(article).find("#registeredUserDesc").html(json.description);
    	  $("#buzz").find("article:last").after(article)
    	}
    	
    function showProposal(json) {
    	  $("#speakerImage").attr('src', json.pictureUrl);
      $("#speakerName").html(json.name);
      $("#twitterId").attr('href', "https://twitter.com/" + json.twitterId);
      $("#twitterId").html("@@" + json.twitterId);
      $("#title").html(json.title);
      $("#proposal").html(json.proposal);
      //$("#followerCount").html("followers:" + json.followerCount);
    	}
  </script>
  }
}


@main("PlayConf 2014", scripts) {
    <section id="speakers" class="clear">
      <header>
        <h1>Speakers</h1>
        <p>Duis aute irure dolor in reprehenderit in voluptate velit esse
        cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
        proident, sunt in culpa qui officia deserunt molli.</p>
        <a href="@routes.Application.newProposal()" class="button green">Submit your proposal</a>
      </header>
      <article>
        <ul>
          <li>
            <img id="speakerImage" src="@keynote.speaker.pictureUrl">
            <h2 id="speakerName">@keynote.speaker.name</h2>
            <a id="twitterId" href="https://twitter.com/@keynote.speaker.twitterId" class="twitter">@keynote.speaker.twitterId</a>
            <h3 id="title">Keynote - @keynote.title</h3>
            <p id="proposal">@keynote.proposal</p>
          </li>
        </ul>
      </article>
    </section>
    <section id="buzz" class="clear">
      <h1>Buzz</h1>
      <article>
        <div class="author">
          <img id="registeredUserPictureUrl" src="assets/images/fake-speaker.png">
          <h2 id="registerdUserName">Guillaume Bort</h2>
          <a id="registerdUserTwitterId" href="#" class="twitter">@@guillaumebort</a>
        </div>
        <div id="registeredUserDesc" class="content">
          Le code de notre session live coding avec @@Sadache pour #DevoxxFR – <a href="https://github.com/">https://github.com/guillaumebort/devoxxfr2013</a>
        </div>
      </article>
      <article>
        <div class="author">
          <img id="registeredUserPictureUrl" src="assets/images/fake-speaker.png">
          <h2 id="registerdUserName">Guillaume Bort</h2>
          <a id="registerdUserTwitterId" href="#" class="twitter">@@guillaumebort</a>
        </div>
        <div id="registeredUserDesc" class="content">
          Le code de notre session live coding avec @@Sadache pour #DevoxxFR – <a href="https://github.com/">https://github.com/guillaumebort/devoxxfr2013</a>
        </div>
      </article>
      <article>
        <div class="author">
          <img id="registeredUserPictureUrl" src="assets/images/fake-speaker.png">
          <h2 id="registerdUserName">Guillaume Bort</h2>
          <a id="registerdUserTwitterId" href="#" class="twitter">@@guillaumebort</a>
        </div>
        <div id="registeredUserDesc" class="content">
          Le code de notre session live coding avec @@Sadache pour #DevoxxFR – <a href="https://github.com/">https://github.com/guillaumebort/devoxxfr2013</a>
        </div>
      </article>
      <article>
        <div class="author">
          <img id="registeredUserPictureUrl" src="assets/images/fake-speaker.png">
          <h2 id="registerdUserName">Guillaume Bort</h2>
          <a id="registerdUserTwitterId" href="#" class="twitter">@@guillaumebort</a>
        </div>
        <div id="registeredUserDesc" class="content">
          Le code de notre session live coding avec @@Sadache pour #DevoxxFR – <a href="https://github.com/">https://github.com/guillaumebort/devoxxfr2013</a>
        </div>
      </article>
    </section>

    <section id="venue" class="clear">
      <!-- See the "145 W 44th St, New York, NY 10036" for the address -->
      <img src="http://maps.googleapis.com/maps/api/staticmap?size=495x280&amp;sensor=false&amp;maptype=roadmap&amp;zoom=15&amp;markers=size:mid%7Ccolor:black%7C145 W 44th St, New York, NY 10036">
      <h1>Venue</h1>
      <p>The HUDSON THEATRE<br>145 W 44th St, New York, NY 10036</p>
      <p><a class="button dark" href="#">Map</a></p>
    </section>
}
